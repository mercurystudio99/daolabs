<script lang="ts">
	import { formattedNum } from '$utils/formatNumber';
	import Icon from '$lib/components/Icon';
	import PopInfo from './PopInfo.svelte';

	export let exchangeName: 'Uniswap' | 'Sushiswap';
	export let exchangeLink: string;
	export let showExchangeName = true;
	export let tokenSymbol: string;
	export let WETHPrice: string;

	const icon = exchangeName?.toLowerCase() as 'uniswap' | 'sushiswap';
</script>

<div class="token-amm-price-row">
	<div class="left">
		<Icon name={icon} />
		{#if showExchangeName}
			<span class="name">
				{exchangeName}
			</span>
		{/if}
	</div>
	<div class="right">
		{#if WETHPrice}
			<a href={exchangeLink} target="_blank" rel="noreferrer">
				{`${formattedNum(WETHPrice)} ${tokenSymbol}/1 ETH`}
				<Icon name="link" />
			</a>
		{:else}
			<PopInfo message={`${exchangeName} has no market for ${tokenSymbol}`} maxWidth="250px">
				Unavailable
			</PopInfo>
		{/if}
	</div>
</div>

<style>
	.token-amm-price-row {
		display: flex;
		font-size: 0.7rem;
		padding: 0.25rem 0;
		justify-content: space-between;
		align-items: center;
	}
	.name {
		display: inline-block;
		transform: translateY(-2px);
	}
</style>
